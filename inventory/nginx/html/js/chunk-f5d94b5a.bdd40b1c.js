(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f5d94b5a"],{1276:function(e,t,a){"use strict";var i=a("d784"),l=a("44e7"),s=a("825a"),n=a("1d80"),o=a("4840"),r=a("8aa5"),c=a("50c4"),d=a("14c3"),u=a("9263"),h=a("d039"),m=[].push,p=Math.min,f=4294967295,g=!h((function(){return!RegExp(f,"y")}));i("split",2,(function(e,t,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var i=String(n(this)),s=void 0===a?f:a>>>0;if(0===s)return[];if(void 0===e)return[i];if(!l(e))return t.call(i,e,s);var o,r,c,d=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,g=new RegExp(e.source,h+"g");while(o=u.call(g,i)){if(r=g.lastIndex,r>p&&(d.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&m.apply(d,o.slice(1)),c=o[0].length,p=r,d.length>=s))break;g.lastIndex===o.index&&g.lastIndex++}return p===i.length?!c&&g.test("")||d.push(""):d.push(i.slice(p)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var l=n(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,l,a):i.call(String(l),t,a)},function(e,l){var n=a(i,e,this,l,i!==t);if(n.done)return n.value;var u=s(e),h=String(this),m=o(u,RegExp),b=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),k=new m(g?u:"^(?:"+u.source+")",v),_=void 0===l?f:l>>>0;if(0===_)return[];if(0===h.length)return null===d(k,h)?[h]:[];var w=0,R=0,x=[];while(R<h.length){k.lastIndex=g?R:0;var y,C=d(k,g?h:h.slice(R));if(null===C||(y=p(c(k.lastIndex+(g?0:R)),h.length))===w)R=r(h,R,b);else{if(x.push(h.slice(w,R)),x.length===_)return x;for(var q=1;q<=C.length-1;q++)if(x.push(C[q]),x.length===_)return x;R=w=y}}return x.push(h.slice(w)),x}]}),!g)},"44e7":function(e,t,a){var i=a("861d"),l=a("c6b6"),s=a("b622"),n=s("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==l(e))}},"6cb4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("b-overlay",{attrs:{show:t.loading,opacity:"0.5"}},[i("div",{staticClass:"d-flex mb-3 align-items-center"},[i("div",{staticClass:"d-flex flex-column mr-2 "},[i("game-select",{model:{value:t.detailsReq.game_name,callback:function(e){t.$set(t.detailsReq,"game_name",e)},expression:"detailsReq.game_name"}}),i("product-select",{staticClass:"mt-1",attrs:{game_name:t.detailsReq.game_name},model:{value:t.detailsReq.package_name,callback:function(e){t.$set(t.detailsReq,"package_name",e)},expression:"detailsReq.package_name"}})],1),i("div",{staticClass:"d-flex flex-column mr-2"},[i("child-select",{attrs:{placeholder:"入库账户"},model:{value:t.detailsReq.import_child,callback:function(e){t.$set(t.detailsReq,"import_child",e)},expression:"detailsReq.import_child"}}),i("child-select",{staticClass:"mt-1",attrs:{placeholder:"出库账户"},model:{value:t.detailsReq.export_child,callback:function(e){t.$set(t.detailsReq,"export_child",e)},expression:"detailsReq.export_child"}})],1),i("div",{staticClass:"d-flex flex-column mr-2"},[i("a-input",{attrs:{placeholder:"编号查找",allowClear:""},model:{value:t.detailsReq.order_no,callback:function(e){t.$set(t.detailsReq,"order_no","string"===typeof e?e.trim():e)},expression:"detailsReq.order_no"}}),i("a-select",{staticClass:"mt-1",attrs:{allowClear:"",placeholder:"凭证状态"},model:{value:t.detailsReq.status,callback:function(e){t.$set(t.detailsReq,"status",e)},expression:"detailsReq.status"}},[i("a-select-option",{attrs:{value:"可使用"}},[t._v("可使用")]),i("a-select-option",{attrs:{value:"已分配"}},[t._v("已分配")]),i("a-select-option",{attrs:{value:"使用中"}},[t._v("使用中")]),i("a-select-option",{attrs:{value:"已到账"}},[t._v("已到账")]),i("a-select-option",{attrs:{value:"未到账"}},[t._v("未到账")])],1)],1),i("div",{staticClass:"d-flex flex-column mr-2"},[i("date-packer",{attrs:{placeholder:"入库开始日期"},model:{value:t.detailsReq.importStartDate,callback:function(e){t.$set(t.detailsReq,"importStartDate",e)},expression:"detailsReq.importStartDate"}}),i("date-packer",{staticClass:"mt-1",attrs:{placeholder:"入库结束日期"},model:{value:t.detailsReq.importEndDate,callback:function(e){t.$set(t.detailsReq,"importEndDate",e)},expression:"detailsReq.importEndDate"}})],1),i("div",{staticClass:"d-flex flex-column mr-4"},[i("b-button-group",[i("b-button",{staticClass:"font-size-12",attrs:{variant:"info"},on:{click:function(e){return t.$router.push("/home/stock/manager/upload")}}},[i("i",{staticClass:"iconfont icon-shangchuan"}),t._v(" 导入凭证 ")]),i("b-button",{staticClass:"font-size-12 ml-1",attrs:{variant:"warning"},on:{click:t.doDownload}},[i("i",{staticClass:"iconfont icon-xiazai"}),t._v(" 导出凭证 ")])],1),i("b-button-group",{staticClass:"mt-2"},[i("b-button",{staticClass:"font-size-12",attrs:{variant:"primary"},on:{click:function(e){return t.doAction("apportion")}}},[i("i",{staticClass:"iconfont icon-usergroup"}),t._v(" 分配凭证 ")]),i("b-button",{staticClass:"font-size-12 ml-1",attrs:{variant:"danger"},on:{click:function(e){return t.doAction("delete")}}},[i("i",{staticClass:"iconfont icon-shanchu"}),t._v(" 删除凭证 ")])],1)],1),i("l-button",{staticClass:"mr-2 bt_green",attrs:{msg:"备注",icon:"icon-bianji"},on:{click:function(e){return t.doAction("remark")}}}),i("l-button",{staticClass:"mr-2",attrs:{msg:"搜索"},on:{click:function(e){return t.getData(1,t.detailsReq.pagerNum)}}})],1),i("b-table",{ref:"receiptDetails",attrs:{hover:"",bordered:"",selectable:"","show-empty":"","empty-text":"暂无数据",items:t.tableData.list,fields:t.columns,"primary-key":"order_no"},on:{"row-selected":function(t){return e.selectedOrderNo=t.map((function(e){return e.order_no}))}},scopedSlots:t._u([{key:"head(selected)",fn:function(){return[i("input",{attrs:{type:"checkbox"},on:{change:function(e){e.target.checked?t.$refs.receiptDetails.selectAllRows():t.$refs.receiptDetails.clearSelected()}}})]},proxy:!0},{key:"cell(selected)",fn:function(e){var t=e.rowSelected;return[i("input",{attrs:{type:"checkbox"},domProps:{checked:t}})]}}])},[i("template",{slot:"table-colgroup"},t._l(t.columns,(function(e){return i("col",{key:e.key,style:{width:e.width}})})),0)],2),i("m-pagination",{attrs:{data:t.tableData,selectArray:t.selectedOrderNo},on:{handleSizeChange:t.getData}}),i("child-select-dialog",{ref:"childSelectDialog",on:{confirm:t.doApportion}}),i("remark-dialog",{ref:"remarkDialog",on:{confirm:t.doRemark}})],1)},l=[],s=(a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d"),a("051c")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择出库账户",visible:e.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,width:300},on:{cancel:function(t){e.visible=!1}}},[a("child-select",{staticClass:"w-100",attrs:{placeholder:"子账户"},model:{value:e.accontName,callback:function(t){e.accontName=t},expression:"accontName"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("l-button",{staticClass:"mr-2",attrs:{msg:"取消",icon:"",type:""},on:{click:function(t){e.visible=!1}}}),a("l-button",{attrs:{msg:"确定",icon:""},on:{click:e.handleOk}})],1)],1)},o=[],r={name:"ChildSelectDialog",data:function(){return{visible:!1,accontName:null}},methods:{show:function(){this.accontName=null,this.visible=!0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.accontName)}}},c=r,d=a("2877"),u=Object(d["a"])(c,n,o,!1,null,"748dcb32",null),h=u.exports,m=a("7d7e"),p=[{key:"selected"},{label:"游戏名称",key:"game_name",width:"10%"},{label:"档位名称",key:"package_name",width:"10%"},{label:"档位价格",key:"package_fee",width:"5%"},{label:"货币代码",key:"currency_code",width:"5%"},{label:"库存单号",key:"order_no",width:"10%"},{label:"库存状态",key:"status",width:"5%"},{label:"生成时间",key:"receipt_time_char",width:"10%"},{label:"入库账户",key:"create_subacount",width:"10%"},{label:"入库时间",key:"create_time",width:"10%"},{label:"出库账户",key:"owner",width:"5%"},{label:"使用时间",key:"use_time",width:"10%"},{label:"备注",key:"invalid_reason",width:"10%"}],f={name:"ReceiptDetails",components:{RemarkDialog:m["a"],ChildSelectDialog:h},data:function(){return{columns:p,loading:!1,detailsReq:{game_name:null,package_name:null,order_no:null,status:void 0,import_child:null,export_child:null,importStartDate:void 0,importEndDate:void 0,del_flag:0,pagerIndex:1,pagerNum:100},tableData:{},selectedOrderNo:[]}},methods:{getData:function(e,t){var a=this;this.loading=!0,this.detailsReq.pagerIndex=e,this.detailsReq.pagerNum=t,this.$http(s["E"],this.detailsReq).then((function(e){a.loading=!1,0===e.resCode&&(a.tableData=e.resData)}))},doAction:function(e){if(0!==this.selectedOrderNo.length)switch(e){case"delete":var t=this;this.$toast.confirm("移至回收站","确认删除",(function(){t.doRecycle()}));break;case"apportion":this.$refs.childSelectDialog.show();break;case"status":this.$refs.statusDialog.show();break;case"remark":this.$refs.remarkDialog.show();break}else this.$toast.error("请选择凭证")},doRecycle:function(){var e=this;this.loading=!0,this.$http(s["q"],{order_nos:this.selectedOrderNo,del_flag:1}).then((function(t){e.loading=!1,0===t.resCode?(e.getData(e.detailsReq.pagerIndex,e.detailsReq.pagerNum),e.selectedOrderNo=[],e.$toast.success("操作成功")):e.$toast.error(t.resMsg)}))},doApportion:function(e){var t=this;this.loading=!0;var a={un_ids:this.selectedOrderNo,owner:e};this.$http(s["l"],a).then((function(e){t.loading=!1,0===e.resCode?(t.getData(t.detailsReq.pagerIndex,t.detailsReq.pagerNum),t.selectedOrderNo=[],t.$toast.success("分配成功")):t.$toast.error(e.resMsg)}))},doDownload:function(){var e=this;this.loading=!0;var t={order_nos:this.selectedOrderNo,del_flag:1};this.$http(s["o"],t,!0).then((function(t){try{var a=t.headers["content-disposition"],i=decodeURI(a.split("fileName=")[1]||a.split("filename=")[1]),l=new Blob([t.data]),s=window.URL.createObjectURL(l);if(window.navigator.msSaveBlob)try{window.navigator.msSaveBlob(l,i)}catch(o){console.log(o)}else{var n=document.createElement("a");n.style.display="none",n.href=s,n.setAttribute("download",i),document.body.appendChild(n),n.click()}}catch(o){e.$toast.error("下载失败")}e.loading=!1,e.getData(e.detailsReq.pagerIndex,e.detailsReq.pagerNum)}),(function(){e.$toast.error("下载失败"),e.loading=!1}))},doRemark:function(e){var t=this;this.loading=!0,this.$http(s["r"],{order_nos:this.selectedOrderNo,remark:e}).then((function(e){t.loading=!1,0===e.resCode?(t.getData(t.detailsReq.pagerIndex,t.detailsReq.pagerNum),t.selectedOrderNo=[],t.$toast.success("备注成功")):t.$toast.error(e.resMsg)}))}},mounted:function(){this.getData(1,this.detailsReq.pagerNum)}},g=f,b=Object(d["a"])(g,i,l,!1,null,"4a2c5d53",null);t["default"]=b.exports},"7d7e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"修改备注",visible:e.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,closable:!1,width:300},on:{cancel:function(t){e.visible=!1}}},[a("a-input",{attrs:{allowClear:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("l-button",{staticClass:"mr-2",attrs:{msg:"取消",icon:"",type:""},on:{click:function(t){e.visible=!1}}}),a("l-button",{attrs:{msg:"确定",icon:""},on:{click:e.handleOk}})],1)],1)},l=[],s={name:"RemarkDialog",data:function(){return{visible:!1,remark:null}},methods:{show:function(){this.remark=null,this.visible=!0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.remark)}}},n=s,o=a("2877"),r=Object(o["a"])(n,i,l,!1,null,"5b311f34",null);t["a"]=r.exports}}]);