(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6285ef0e"],{b0c0:function(t,e,a){var r=a("83ab"),s=a("9bf2").f,n=Function.prototype,o=n.toString,i=/^\s*function ([^ (]*)/,l="name";r&&!(l in n)&&s(n,l,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(t){return""}}})},baa5:function(t,e,a){var r=a("23e7"),s=a("e58c");r({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},e3b2:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("b-overlay",{attrs:{show:e.loading,opacity:"0.5"}},[e.$store.getters.getExcelData?e._e():r("el-upload",{attrs:{"before-upload":e.beforeUpload,drag:"",accept:".xlsx,.xls,.txt",action:"",multiple:!1,"show-file-list":!1}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("将Excel Txt拖到此处，或"),r("em",[e._v("点击上传")])])]),e.$store.getters.getExcelData?r("div",{staticClass:"mb-3"},[r("span",{staticClass:"file-name"},[e._v(" 文件名 : "+e._s(e.$store.getters.getExeclName))]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[e._v("总数 : "+e._s(e.$store.getters.getExcelData.length))]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[e._v("已处理 : "+e._s(e.$store.getters.getUploadCount)+" 条")]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[e._v("上传失败 : "+e._s(e.$store.getters.getFlieCount)+" 条")])],1):e._e(),e.$store.getters.getExcelData?r("div",{staticClass:"mb-3"},[r("child-select",{staticClass:"mr-2",attrs:{placeholder:"指定分配账户"},on:{input:function(e){return t.$store.commit("setOwner_account",e)}}}),r("a-select",{staticClass:"mr-2",attrs:{disabled:e.$store.getters.getUploadStatus},on:{change:function(t){return e.$store.commit("setAerifyable",e.appleVerify)}},model:{value:e.appleVerify,callback:function(t){e.appleVerify=t},expression:"appleVerify"}},[r("a-select-option",{attrs:{value:0}},[e._v("苹果验证")]),r("a-select-option",{attrs:{value:1}},[e._v("不验证")])],1),e.$store.getters.getUploadStatus?e._e():r("l-button",{staticClass:"mr-2",attrs:{msg:"清空数据",type:"danger",icon:"icon-shanchu"},on:{click:function(t){return e.$store.commit("clearUpLoad")}}}),e.$store.getters.getUploadStatus?e._e():r("l-button",{staticClass:"mr-2",attrs:{msg:e.$store.getters.getUploadCount>0?"继续上传":"立即上传",icon:"icon-shangchuan"},on:{click:function(t){return e.$store.commit("startUpLoad")}}}),e.$store.getters.getUploadStatus?r("l-button",{attrs:{msg:"停止",type:"danger",icon:"icon-zantingtingzhi"},on:{click:function(t){return e.$store.commit("stopUpLoad")}}}):e._e()],1):e._e(),r("b-table",{attrs:{hover:"",bordered:"","show-empty":"","empty-text":"暂无数据",items:e.$store.getters.getExcelData,fields:e.columns},scopedSlots:e._u([{key:"cell(package_id)",fn:function(t){return[e._v(" "+e._s(t.item.package_id?t.item.package_id:"否")+" ")]}},{key:"cell(import_result)",fn:function(t){return[r("span",{class:"上传失败"===t.item.import_result?"text-danger":""},[e._v(" "+e._s(t.item.import_result)+" ")])]}},{key:"cell(action)",fn:function(t){return["上传失败"===t.item.import_result?r("span",{staticClass:"pointer text-danger",on:{click:function(a){return e.doReUpload(t.item)}}},[e._v("重新上传")]):e._e()]}}])},[r("template",{slot:"table-colgroup"},e._l(e.columns,(function(t){return r("col",{key:t.key,style:{width:t.width}})})),0)],2)],1)},s=[],n=(a("baa5"),a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("1146")),o=a.n(n),i=a("051c"),l=[{label:"游戏名称",key:"game_name",width:"15%"},{label:"档位名称",key:"package_name",width:"15%"},{label:"档位价格",key:"package_fee",width:"10%"},{label:"库存单号",key:"order_no",width:"10%"},{label:"生成时间",key:"create_time",width:"10%"},{label:"指定档位",key:"package_id",width:"5%"},{label:"导入状态",key:"import_result",width:"15%"},{label:"导入结果",key:"result_des",width:"15%"},{label:"操作",key:"action",width:"5%"}],c={name:"UpLoadDetails",data:function(){return{loading:!1,columns:l,fileList:[],appleVerify:0}},methods:{beforeUpload:function(t){var e=this;this.fileList=[],this.loading=!0;var a=t.name.substring(t.name.lastIndexOf(".")+1);return"txt"===a?this.pauseTXT(t):this.pauseXlsx(t).then((function(t){e.$toast.success(t)})).catch((function(t){e.$toast.error(t)})).finally((function(){e.loading=!1})),!1},pauseXlsx:function(t){var e=this;return new Promise((function(a,r){var s=new FileReader;s.onload=function(s){try{var n=o.a.read(s.target.result,{type:"buffer"}),i=o.a.utils.sheet_to_json(n.Sheets[n.SheetNames[0]]);e.$store.commit("storeExcelData",i),e.$store.commit("storeFileName",t.name),a("解析成功")}catch(l){r("文件解析失败"+l)}},s.readAsArrayBuffer(t)}))},pauseTXT:function(t){var e=this,a=new FileReader;a.onload=function(a){try{for(var r=a.target.result.split(/[\r\n]+/g),s=[],n=0;n<r.length;n++)if(r[n]){var o=JSON.parse(r[n]);o&&s.push(o)}s&&(e.$store.commit("storeExcelData",s),e.$store.commit("storeFileName",t.name))}catch(i){e.$toast.error("文件解析失败"+i)}e.loading=!1},a.readAsText(t)},doReUpload:function(t){var e=this;t.import_result="重新上传中",t.result_des="",t.verify=this.$store.getters.getVerifyable,t.owner_account=this.$store.getters.getOwner_account,this.$http(i["O"],t).then((function(a){if(e.loading=!1,0===a.resCode){var r=a.resData;t.import_result="上传成功",t.game_name=r.game_name,t.package_name=r.package_name,t.result_des=r.invalid_reason,t.package_fee=r.package_fee,t.order_no=r.order_no,t.create_time=r.create_time}else t.import_result="上传失败",t.result_des=a.resMsg}),(function(){t.import_result="上传失败",t.result_des="网络连接超时"}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,r,s,!1,null,null,null);e["default"]=p.exports},e58c:function(t,e,a){"use strict";var r=a("fc6a"),s=a("a691"),n=a("50c4"),o=a("a640"),i=a("ae40"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),p=i("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!p;t.exports=f?function(t){if(u)return c.apply(this,arguments)||0;var e=r(this),a=n(e.length),o=a-1;for(arguments.length>1&&(o=l(o,s(arguments[1]))),o<0&&(o=a+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:c}}]);