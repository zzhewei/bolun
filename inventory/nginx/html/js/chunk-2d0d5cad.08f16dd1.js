(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d5cad"],{7097:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-overlay",{attrs:{show:t.loading,opacity:"0.5"}},[e("div",{staticClass:"d-flex mb-3 align-items-center"},[e("div",{staticClass:"d-flex flex-column mr-2"},[e("a-input",{attrs:{placeholder:"账户名称",allowClear:""},model:{value:t.searchName,callback:function(a){t.searchName="string"===typeof a?a.trim():a},expression:"searchName"}})],1),e("l-button",{staticClass:"bt_info",attrs:{msg:"添加",icon:"icon-tianjia"},on:{click:function(a){return t.$refs.create_dialog.show()}}})],1),e("b-table",{attrs:{hover:"",bordered:"","show-empty":"","empty-text":"暂无数据",items:t.tableData,fields:t.columns,"primary-key":"accountName"},scopedSlots:t._u([{key:"cell(status)",fn:function(a){return["3"===a.item.status?e("span",[t._v("入库"),e("a-divider",{attrs:{type:"vertical"}}),t._v("出库")],1):t._e(),"1"===a.item.status?e("span",[t._v("出库")]):t._e(),"2"===a.item.status?e("span",[t._v("入库")]):t._e(),"0"===a.item.status?e("span",{staticClass:"text-danger"},[t._v("禁用")]):t._e()]}},{key:"cell(action)",fn:function(a){return[e("span",{staticClass:"pointer",on:{click:function(e){return t.$refs.create_dialog.show(a.item)}}},[t._v("修改")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"text-danger pointer",on:{click:function(e){return t.deleteChild(a.item)}}},[t._v(" 删除")])]}}])},[e("template",{slot:"table-colgroup"},t._l(t.columns,(function(t){return e("col",{key:t.key,style:{width:t.width}})})),0)],2),e("creat-child-dialog",{ref:"create_dialog",on:{confirm:t.handleChild}})],1)},s=[],l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{attrs:{title:t.child.unId?"修改信息":"创建子账户",visible:t.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,width:450},on:{cancel:function(a){t.visible=!1}}},[e("a-form",{attrs:{size:"small","label-col":{span:3},"wrapper-col":{span:19}}},[e("a-form-item",{staticClass:"mb-0",attrs:{label:"账户"}},[e("a-input",{attrs:{disabled:t.child.unId},model:{value:t.child.accountName,callback:function(a){t.$set(t.child,"accountName","string"===typeof a?a.trim():a)},expression:"child.accountName"}})],1),e("a-form-item",{staticClass:"mb-0",attrs:{label:"密码"}},[e("a-input",{model:{value:t.child.password,callback:function(a){t.$set(t.child,"password","string"===typeof a?a.trim():a)},expression:"child.password"}})],1),e("a-form-item",{staticClass:"mb-0",attrs:{label:"权限"}},[e("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.child.status,callback:function(a){t.$set(t.child,"status",a)},expression:"child.status"}},[e("a-radio-button",{attrs:{value:"0"}},[t._v("禁用")]),e("a-radio-button",{attrs:{value:"1"}},[t._v("只出库")]),e("a-radio-button",{attrs:{value:"2"}},[t._v("只入库")]),e("a-radio-button",{attrs:{value:"3"}},[t._v("可出入库")])],1)],1),e("a-form-item",{staticClass:"mb-0",attrs:{label:"备注"}},[e("a-input",{attrs:{type:"textarea",allowClear:"",rows:4},model:{value:t.child.remarker,callback:function(a){t.$set(t.child,"remarker",a)},expression:"child.remarker"}})],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("l-button",{staticClass:"mr-2",attrs:{msg:"取消",icon:"",type:""},on:{click:function(a){t.visible=!1}}}),e("l-button",{attrs:{msg:"确定",icon:""},on:{click:t.handleOk}})],1)],1)},n=[],o={name:"CreatChildDialog",data:function(){return{visible:!1,child:{}}},methods:{show:function(t){this.child=t?JSON.parse(JSON.stringify(t)):{status:"3"},this.visible=!0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.child)}}},r=o,c=e("2877"),d=Object(c["a"])(r,l,n,!1,null,null,null),u=d.exports,h=e("051c"),m=[{label:"账户名称",key:"accountName",width:"20%"},{label:"账户权限",key:"status",width:"20%"},{label:"操作指令",key:"action",width:"10%"},{label:"描述信息",key:"remarker",width:"50%"}],f={name:"ChildTable",components:{CreatChildDialog:u},data:function(){return{loading:!1,columns:m,searchName:""}},computed:{tableData:function(){return this.$store.getters.searchChildData(this.searchName)}},methods:{getChildData:function(){var t=this;this.loading=!0,this.$http(h["y"]).then((function(a){t.loading=!1,0===a.resCode&&t.$store.commit("storeChildData",a.resData)}))},handleChild:function(t){t.unId?this.doChangStatus(t):this.creatChild(t)},creatChild:function(t){var a=this;this.loading=!0,this.$http(h["g"],t).then((function(t){a.loading=!1,0===t.resCode?a.getChildData():a.$toast.error(t.resMsg)}))},doChangStatus:function(t){var a=this;this.loading=!0,this.$http(h["M"],t).then((function(t){a.loading=!1,0===t.resCode?a.getChildData():a.$toast.error(t.resMsg)}))},deleteChild:function(t){var a=this;this.$toast.confirm("清空分配(不删除凭证)","删除子账户:"+t.accountName,(function(){return a.doDelete(t)}))},doDelete:function(t){var a=this;this.loading=!0,this.$http(h["h"],t).then((function(t){a.loading=!1,0===t.resCode?a.getChildData():a.$toast.error(t.resMsg)}))}},mounted:function(){this.getChildData()}},p=f,b=Object(c["a"])(p,i,s,!1,null,"0a871d5c",null);a["default"]=b.exports}}]);