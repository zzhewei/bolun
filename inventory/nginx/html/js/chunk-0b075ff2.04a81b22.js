(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b075ff2"],{"09a7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("b-overlay",{attrs:{show:e.loading,opacity:"0.5"}},[s("div",{staticClass:"d-flex mb-3 align-items-center"},[s("div",{staticClass:"d-flex flex-column mr-2"},[s("a-input",{attrs:{placeholder:"游戏名称",allowClear:""},model:{value:e.searchBean.GAME_NAME,callback:function(t){e.$set(e.searchBean,"GAME_NAME","string"===typeof t?t.trim():t)},expression:"searchBean.GAME_NAME"}})],1),s("div",{staticClass:"d-flex flex-column mr-2"},[s("a-input",{attrs:{placeholder:"档位名称",allowClear:""},model:{value:e.searchBean.PACKAGE_NAME,callback:function(t){e.$set(e.searchBean,"PACKAGE_NAME","string"===typeof t?t.trim():t)},expression:"searchBean.PACKAGE_NAME"}})],1),s("div",{staticClass:"d-flex mr-2"},[s("a-input",{attrs:{placeholder:"档位代码",allowClear:""},model:{value:e.searchBean.PACKAGE_CODE,callback:function(t){e.$set(e.searchBean,"PACKAGE_CODE","string"===typeof t?t.trim():t)},expression:"searchBean.PACKAGE_CODE"}})],1),s("l-button",{staticClass:"mr-2 bt_green",attrs:{msg:"添加",icon:"icon-tianjia"},on:{click:function(t){return e.$refs.addDialog.show()}}}),s("l-button",{staticClass:"mr-2 bt_info",attrs:{msg:"导出",icon:"icon-xiazai"},on:{click:e.doDownload}}),s("l-button",{staticClass:"mr-2 bt_warn",attrs:{msg:"导入",icon:"icon-shangchuan"},on:{click:function(t){return e.$refs.uploadBtn.click()}}}),s("input",{ref:"uploadBtn",staticClass:"d-none",attrs:{type:"file",accept:".xls,.xlsx"},on:{change:e.doPauseExcel}}),s("l-button",{staticClass:"mr-2",attrs:{msg:"删除",icon:"icon-shanchu",type:"danger"},on:{click:e.deleteProduct}}),s("l-button",{staticClass:"mr-2 bt_indigo",attrs:{msg:"APP显隐",icon:"icon-qiehuan"},on:{click:function(t){return e.$refs.pStatusDialog.show()}}}),s("l-button",{staticClass:"mr-2",attrs:{msg:"搜索"},on:{click:function(t){return e.getData(1,e.searchBean.pagerNum)}}})],1),s("b-table",{ref:"productTable",attrs:{hover:"",bordered:"","show-empty":"",selectable:"","empty-text":"暂无数据",items:e.tableData.list,fields:e.columns,"primary-key":"UN_ID"},on:{"row-selected":function(e){return t.selected=e.map((function(t){return t.UN_ID}))}},scopedSlots:e._u([{key:"head(selected)",fn:function(){return[s("input",{attrs:{type:"checkbox"},on:{change:function(t){t.target.checked?e.$refs.productTable.selectAllRows():e.$refs.productTable.clearSelected()}}})]},proxy:!0},{key:"cell(selected)",fn:function(t){var e=t.rowSelected;return[s("input",{attrs:{type:"checkbox"},domProps:{checked:e}})]}},{key:"cell(GAME_NAME)",fn:function(t){return[s("span",[e._v(" "+e._s(t.item.GAME_NAME?t.item.GAME_NAME:"暂无："+t.item.GAME_CODE)+" ")])]}},{key:"cell(PACKAGE_STATUS)",fn:function(t){return[0===t.item.PACKAGE_STATUS?s("span",[e._v("App显示")]):e._e(),1===t.item.PACKAGE_STATUS?s("span",[e._v("App隐藏")]):e._e()]}},{key:"cell(action)",fn:function(t){return[s("span",[s("button",{staticClass:"text-purple",on:{click:function(a){return e.$refs.addDialog.show(t.item)}}},[e._v(" 修改")])])]}}])},[s("template",{slot:"table-colgroup"},e._l(e.columns,(function(t){return s("col",{key:t.key,style:{width:t.width}})})),0)],2),s("m-pagination",{attrs:{data:e.tableData},on:{handleSizeChange:e.getData}}),s("product-add-dialog",{ref:"addDialog",on:{confirm:e.handleOkAddUp}}),s("product-status-dialog",{ref:"pStatusDialog",on:{confirm:e.upStatus}})],1)},n=[],o=(a("d81d"),a("d3b7"),a("051c")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.isAdd?"添加档位":"修改档位信息",visible:t.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,width:400},on:{cancel:function(e){t.visible=!1}}},[a("a-form",{attrs:{size:"small","label-col":{span:5},"wrapper-col":{span:19}}},[t.isAdd?a("a-form-item",{staticClass:"mb-0",attrs:{label:"游戏代码"}},[a("a-input",{model:{value:t.product.GAME_CODE,callback:function(e){t.$set(t.product,"GAME_CODE",e)},expression:"product.GAME_CODE"}})],1):t._e(),t.isAdd?t._e():a("a-form-item",{staticClass:"mb-0",attrs:{label:"游戏名称"}},[a("a-input",{attrs:{disabled:!0},model:{value:t.product.GAME_NAME,callback:function(e){t.$set(t.product,"GAME_NAME",e)},expression:"product.GAME_NAME"}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"档位名称"}},[a("a-input",{model:{value:t.product.PACKAGE_NAME,callback:function(e){t.$set(t.product,"PACKAGE_NAME",e)},expression:"product.PACKAGE_NAME"}})],1),t.isAdd?a("a-form-item",{staticClass:"mb-0",attrs:{label:"档位代码"}},[a("a-input",{model:{value:t.product.PACKAGE_CODE,callback:function(e){t.$set(t.product,"PACKAGE_CODE",e)},expression:"product.PACKAGE_CODE"}})],1):t._e(),a("a-form-item",{staticClass:"mb-0",attrs:{label:"档位价格"}},[a("a-input",{model:{value:t.product.PACKAGE_FEE,callback:function(e){t.$set(t.product,"PACKAGE_FEE",e)},expression:"product.PACKAGE_FEE"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("l-button",{staticClass:"mr-2",attrs:{msg:"取 消",icon:"",type:""},on:{click:function(e){t.visible=!1}}}),a("l-button",{attrs:{msg:"确 定",icon:""},on:{click:t.handleOk}})],1)],1)},l=[],r={name:"ProductAddDialog",data:function(){return{visible:!1,isAdd:!0,product:{}}},methods:{show:function(t){this.isAdd=!t,this.product=t?JSON.parse(JSON.stringify(t)):{},this.visible=!0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.product)}}},c=r,u=a("2877"),d=Object(u["a"])(c,i,l,!1,null,null,null),h=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"档位对入库插件显隐",visible:t.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,width:300},on:{cancel:function(e){t.visible=!1}}},[a("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("a-radio-button",{attrs:{value:0}},[t._v(" 显示 ")]),a("a-radio-button",{attrs:{value:1}},[t._v(" 隐藏 ")])],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("l-button",{staticClass:"mr-2",attrs:{msg:"取消",icon:"",type:""},on:{click:function(e){t.visible=!1}}}),a("l-button",{attrs:{msg:"确定",icon:""},on:{click:t.handleOk}})],1)],1)},f=[],A={name:"ProductStatusDialog",data:function(){return{visible:!1,status:0}},methods:{show:function(){this.visible=!0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.status)}}},m=A,b=Object(u["a"])(m,p,f,!1,null,"1fc4a178",null),E=b.exports,g=a("8588"),C=a("1146"),_=a.n(C),v={name:"ProductTable",components:{ProductStatusDialog:E,ProductAddDialog:h},data:function(){return{loading:!1,tableData:{},columns:[{key:"selected"},{label:"档位ID",key:"UN_ID",width:"5%"},{label:"游戏名称",key:"GAME_NAME",width:"20%"},{label:"档位名称",key:"PACKAGE_NAME",width:"25%"},{label:"档位标识",key:"PACKAGE_CODE",width:"30%"},{label:"价格",key:"PACKAGE_FEE",width:"5%"},{label:"档位状态",key:"PACKAGE_STATUS",width:"10%"},{label:"操作",key:"action",width:"5%"}],searchBean:{GAME_NAME:null,PACKAGE_NAME:null,PACKAGE_CODE:null,pagerIndex:1,pagerNum:100},selected:[]}},methods:{getData:function(t,e){var a=this;this.loading=!0,this.searchBean.pagerIndex=t,this.searchBean.pagerNum=e,this.$http(o["D"],this.searchBean).then((function(t){a.loading=!1,0===t.resCode&&(a.tableData=t.resData)}))},deleteProduct:function(){if(0!==this.selected.length){var t=this;this.$toast.confirm("","确认删除",(function(){return t.doDelete()}))}},doDelete:function(){var t=this;this.loading=!0,this.$http(o["j"],{UN_IDS:this.selected}).then((function(e){t.loading=!1,0===e.resCode?(t.getData(t.searchBean.pagerIndex,t.searchBean.pagerNum),t.$toast.success("删除成功")):t.$toast.error(e.resMsg)}))},handleOkAddUp:function(t){var e=this;this.loading=!0,this.$http(o["b"],t).then((function(t){e.loading=!1,0===t.resCode?(e.$toast.success("操作成功"),e.getData(e.searchBean.pagerIndex,e.searchBean.pagerNum)):e.$toast.error(t.resMsg)}))},upStatus:function(t){var e=this;0!==this.selected.length&&(this.loading=!0,this.$http(o["P"],{UN_IDS:this.selected,status:t}).then((function(t){e.loading=!1,0===t.resCode?(e.$toast.success("操作成功"),e.getData(e.searchBean.pagerIndex,e.searchBean.pagerNum)):e.$toast.error(t.resMsg)})))},doDownload:function(){var t=this;0!==this.selected.length?(this.loading=!0,this.$http(o["t"],{unIds:this.selected},!0).then((function(e){Object(g["a"])(e).catch((function(){t.$toast.error("下载失败")}))})).catch((function(){return t.$toast.error("下载失败")})).finally((function(){return t.loading=!1}))):this.$toast.error("请选择档位")},doPauseExcel:function(t){var e=this,a=t.target.files;if(a.length<=0)return!1;var s=new FileReader;s.onload=function(a){try{var s=_.a.read(a.target.result,{type:"buffer"}),n=_.a.utils.sheet_to_json(s.Sheets[s.SheetNames[0]]);e.doUpload(n)}catch(t){e.$toast.error("文件解析错误")}finally{e.$refs.uploadBtn.value=null}},s.readAsArrayBuffer(a[0])},doUpload:function(t){var e=this;this.loading=!0;var a=t.map((function(t){return{GAME_CODE:t["游戏代码"],PACKAGE_CODE:t["档位代码"],PACKAGE_NAME:t["档位名称"],PACKAGE_FEE:t["档位价格"]}}));this.$http(o["S"],{products:a}).then((function(t){0===t.resCode?e.$toast.success("导入成功"):e.$toast.error(t.resMsg)})).finally((function(){return e.loading=!1}))}},mounted:function(){this.getData(1,this.searchBean.pagerNum)}},k=v,y=Object(u["a"])(k,s,n,!1,null,null,null);e["default"]=y.exports},8588:function(t,e,a){"use strict";a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d");function s(t){return new Promise((function(e,a){try{var s=t.headers["content-disposition"],n=decodeURI(s.split("fileName=")[1]||s.split("filename=")[1]),o=new Blob([t.data]),i=window.URL.createObjectURL(o);if(window.navigator.msSaveBlob)try{window.navigator.msSaveBlob(o,n)}catch(r){console.log(r),a("下载失败，浏览器不支持")}else{var l=document.createElement("a");l.style.display="none",l.href=i,l.setAttribute("download",n),document.body.appendChild(l),l.click()}}catch(r){a("下载失败")}}))}e["a"]=s}}]);