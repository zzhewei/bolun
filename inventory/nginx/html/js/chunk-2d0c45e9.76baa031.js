(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c45e9"],{"3b15":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.loading,opacity:"0.5"}},[a("div",{staticClass:"d-flex mb-3 align-items-center"},[a("div",{staticClass:"d-flex flex-column mr-2"},[a("game-select",{model:{value:t.detailsReq.game_name,callback:function(e){t.$set(t.detailsReq,"game_name",e)},expression:"detailsReq.game_name"}})],1),a("div",{staticClass:"d-flex flex-column mr-2 "},[a("product-select",{attrs:{game_name:t.detailsReq.game_name},model:{value:t.detailsReq.package_name,callback:function(e){t.$set(t.detailsReq,"package_name",e)},expression:"detailsReq.package_name"}})],1),"user_main"===t.$store.getters.getRole()?a("div",{staticClass:"d-flex flex-column mr-2"},[a("child-select",{attrs:{placeholder:"子账户"},model:{value:t.detailsReq.export_child,callback:function(e){t.$set(t.detailsReq,"export_child",e)},expression:"detailsReq.export_child"}})],1):t._e(),a("l-button",{staticClass:"mr-2",attrs:{msg:"搜索"},on:{click:function(e){return t.getData(1,t.detailsReq.pagerNum)}}})],1),a("b-table",{attrs:{hover:"",bordered:"","show-empty":"","empty-text":"暂无数据",items:t.tableData.list,fields:t.columns},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[a("span",{staticClass:"text-danger pointer",on:{click:function(a){return t.$refs.ApportionAdjustDialog.show(e.item)}}},[t._v("分配调整")])]}}])},[a("template",{slot:"table-colgroup"},t._l(t.columns,(function(t){return a("col",{key:t.key,style:{width:t.width}})})),0)],2),a("m-pagination",{attrs:{data:t.tableData},on:{handleSizeChange:t.getData}}),a("apportion-adjust-dialog",{ref:"ApportionAdjustDialog",on:{confirm:t.doAllocationAdjust}})],1)},s=[],i=(a("a434"),a("051c")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"分配调整",visible:t.visible,keyboard:!1,destroyOnClose:!0,maskClosable:!1,width:400},on:{cancel:function(e){t.visible=!1}}},[a("a-form",{attrs:{size:"small","label-col":{span:5},"wrapper-col":{span:19}}},[a("a-form-item",{staticClass:"mb-0",attrs:{label:"子账户"}},[a("a-input",{attrs:{disabled:!0,placeholder:"子账户",value:t.apportionReq.owner}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"游戏名称"}},[a("a-input",{attrs:{disabled:!0,placeholder:"",value:t.apportionReq.game_name}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"档位名称"}},[a("a-input",{attrs:{disabled:!0,placeholder:"",value:t.apportionReq.package_name}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"档位价格"}},[a("a-input",{attrs:{disabled:!0,value:t.apportionReq.package_fee}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"可用数量"}},[a("a-input",{attrs:{disabled:!0,value:t.apportionReq.allocated_amount}})],1),a("a-form-item",{staticClass:"mb-0",attrs:{label:"调整方式"}},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:function(e){t.apportionReq.transferOwner=null}},model:{value:t.adjustType,callback:function(e){t.adjustType=e},expression:"adjustType"}},[a("a-radio-button",{attrs:{value:0}},[t._v(" 回收分配 ")]),a("a-radio-button",{attrs:{value:1}},[t._v(" 转移分配 ")])],1)],1),1===t.adjustType?a("a-form-item",{staticClass:"mb-0",attrs:{label:"目标账户"}},[a("child-select",{attrs:{placeholder:"无"},model:{value:t.apportionReq.transferOwner,callback:function(e){t.$set(t.apportionReq,"transferOwner",e)},expression:"apportionReq.transferOwner"}})],1):t._e(),a("a-form-item",{staticClass:"mb-0",attrs:{label:"调整数量"}},[a("a-input-number",{attrs:{min:1,max:t.apportionReq.allocated_amount,precision:0},model:{value:t.apportionReq.apportionNum,callback:function(e){t.$set(t.apportionReq,"apportionNum",e)},expression:"apportionReq.apportionNum"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("l-button",{staticClass:"mr-2",attrs:{msg:"取消",icon:"",type:""},on:{click:function(e){t.visible=!1}}}),a("l-button",{attrs:{msg:"确定",icon:""},on:{click:t.handleOk}})],1)],1)},n=[],r={name:"ApportionAdjustDialog",data:function(){return{visible:!1,apportionReq:{},adjustType:0}},methods:{show:function(t){this.apportionReq=JSON.parse(JSON.stringify(t)),this.visible=!0,this.adjustType=0},handleOk:function(){this.visible=!1,this.$emit("confirm",this.apportionReq)}}},c=r,p=a("2877"),d=Object(p["a"])(c,o,n,!1,null,"2c93261e",null),u=d.exports,m=[{label:"子账户",key:"owner",width:"10%"},{label:"游戏名称",key:"game_name",width:"25%"},{label:"档位名称",key:"package_name",width:"25%"},{label:"档位价格",key:"package_fee",width:"10%"},{label:"可用数量",key:"allocated_amount",width:"10%"},{label:"已用数量",key:"used_amount",width:"10%"},{label:"操作",key:"action",width:"10%"}],b={name:"StockChildReport",components:{ApportionAdjustDialog:u},data:function(){return{columns:m,loading:!1,detailsReq:{game_name:null,package_name:null,export_child:null,pagerIndex:1,pagerNum:100},tableData:{}}},methods:{getData:function(t,e){var a=this;this.loading=!0,this.detailsReq.pagerIndex=t,this.detailsReq.pagerNum=e,this.$http(i["I"],this.detailsReq).then((function(t){a.loading=!1,0===t.resCode&&(a.tableData=t.resData)}))},doAllocationAdjust:function(t){var e=this;this.loading=!0,this.$http(i["k"],t).then((function(t){e.loading=!1,0===t.resCode?(e.getData(e.detailsReq.pagerIndex,e.detailsReq.pagerNum),e.$toast.success("调整分配成功")):e.$toast.error(t.resMsg)}))}},mounted:function(){this.getData(1,this.detailsReq.pagerNum),"user_main"!==this.$store.getters.getRole()&&this.columns.splice(6,1)}},h=b,f=Object(p["a"])(h,l,s,!1,null,"382801af",null);e["default"]=f.exports}}]);